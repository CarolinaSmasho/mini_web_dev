@{
    ViewData["Title"] = "Activity Feed";
}

<main class="mx-auto flex w-full max-w-[1440px] flex-col gap-10 px-6 py-8">
    <!-- My Lobbies Section -->
    <section class="flex flex-col gap-4">
        <div class="flex items-center justify-between">
            <h2 class="text-2xl font-bold tracking-tight text-white flex items-center gap-2">
                <span class="material-symbols-outlined text-primary">sports_esports</span>
                My Lobbies
            </h2>
            <button class="text-sm font-medium text-gray-400 hover:text-white transition-colors">View History</button>
        </div>
        <div class="flex gap-4 overflow-x-auto pb-4 hide-scrollbar" id="myLobbiesGrid">
            <!-- Active Lobby Card 1 (Sample) -->
            <div class="group relative flex h-48 w-80 min-w-[320px] shrink-0 flex-col justify-between overflow-hidden rounded-lg bg-card-dark border border-white/5 transition-all hover:border-primary/50">
                <div class="absolute inset-0 z-0">
                    <img alt="Game background" class="h-full w-full object-cover opacity-60 transition-transform duration-500 group-hover:scale-110" src="https://images.unsplash.com/photo-1542751371-adc38448a05e?auto=format&fit=crop&q=80&w=800" />
                    <div class="absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent"></div>
                </div>
                <div class="relative z-10 flex justify-between p-4">
                    <span class="inline-flex items-center rounded bg-green-500/20 px-2 py-0.5 text-xs font-bold text-green-400 backdrop-blur-md border border-green-500/20">
                        <span class="mr-1.5 block size-1.5 animate-pulse rounded-full bg-green-400"></span>
                        LIVE
                    </span>
                    <span class="rounded bg-black/60 px-2 py-0.5 text-xs font-medium text-white backdrop-blur-md">2/3 Filled</span>
                </div>
                <div class="relative z-10 p-4">
                    <h3 class="mb-1 text-lg font-bold leading-tight text-white">Apex Ranked Grind</h3>
                    <p class="mb-3 text-xs text-gray-300">Host: @Context.Session.GetString("Username")</p>
                    <button class="flex h-8 w-full items-center justify-center rounded bg-white text-black text-xs font-bold uppercase hover:bg-primary transition-colors">
                        Manage Lobby
                    </button>
                </div>
            </div>

            <!-- Create New Placeholder -->
            <a asp-controller="Lobby" asp-action="Create" class="flex h-48 w-40 min-w-[160px] shrink-0 flex-col items-center justify-center gap-3 rounded-lg border-2 border-dashed border-white/10 bg-white/5 text-gray-400 transition-colors hover:border-primary hover:text-primary">
                <span class="material-symbols-outlined text-[32px]">add_circle</span>
                <span class="text-xs font-bold uppercase">New Lobby</span>
            </a>
        </div>
    </section>

    <!-- Public Feed Section -->
    <section class="flex flex-col gap-6">
        <div class="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between">
            <h2 class="text-2xl font-bold tracking-tight text-white flex items-center gap-2">
                <span class="material-symbols-outlined text-primary">public</span>
                Public Feed
            </h2>
            <!-- Filters -->
            <div class="flex flex-wrap gap-2">
                <button class="flex h-8 items-center gap-2 rounded bg-white text-black px-3 text-xs font-bold hover:bg-gray-200">
                    <span class="material-symbols-outlined text-[16px]">grid_view</span>
                    All Games
                </button>
                <button class="flex h-8 items-center gap-2 rounded bg-card-dark border border-white/10 px-3 text-xs font-bold text-gray-300 hover:border-primary/50 hover:text-white transition-colors">
                    <span class="material-symbols-outlined text-[16px]">crossword</span>
                    FPS
                </button>
                <button class="flex h-8 items-center gap-2 rounded bg-card-dark border border-white/10 px-3 text-xs font-bold text-gray-300 hover:border-primary/50 hover:text-white transition-colors">
                    <span class="material-symbols-outlined text-[16px]">swords</span>
                    RPG
                </button>
                <button class="ml-2 flex h-8 items-center justify-center rounded bg-card-dark border border-white/10 px-2 text-gray-300 hover:text-white">
                    <span class="material-symbols-outlined text-[18px]">filter_list</span>
                </button>
            </div>
        </div>

        <!-- Grid -->
        <div class="grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4" id="publicLobbiesGrid">
            <!-- Sample Lobby Card -->
            <article class="group flex flex-col overflow-hidden rounded-lg bg-card-dark border border-white/5 transition-all hover:-translate-y-1 hover:border-primary/50 hover:shadow-[0_4px_20px_-5px_rgba(0,0,0,0.5)]">
                <div class="relative h-32 w-full overflow-hidden">
                    <div class="absolute top-2 left-2 z-10 flex gap-2">
                        <span class="rounded bg-black/70 backdrop-blur-sm px-2 py-0.5 text-[10px] font-bold text-white uppercase tracking-wider">Valorant</span>
                    </div>
                    <img alt="Game artwork" class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-110" src="https://images.unsplash.com/photo-1542751371-adc38448a05e?auto=format&fit=crop&q=80&w=800" />
                    <div class="absolute inset-0 bg-gradient-to-t from-card-dark to-transparent"></div>
                </div>
                <div class="flex flex-1 flex-col p-4 pt-0">
                    <div class="mb-2 flex items-center justify-between">
                        <div class="flex items-center gap-1.5 text-xs text-gray-400">
                            <span class="material-symbols-outlined text-[14px]">person</span>
                            <span>Host: ValorantGod</span>
                        </div>
                        <span class="flex h-2 w-2 rounded-full bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.6)]"></span>
                    </div>
                    <h3 class="mb-3 text-lg font-bold text-white leading-snug group-hover:text-primary transition-colors">Plat 2+ Need Smokes for Ranked</h3>
                    <!-- Slots -->
                    <div class="mb-4 flex items-center gap-1">
                        <div class="flex h-8 w-8 items-center justify-center rounded bg-primary/10 text-primary">
                            <span class="material-symbols-outlined text-[20px]">person_filled</span>
                        </div>
                        <div class="flex h-8 w-8 items-center justify-center rounded bg-primary/10 text-primary">
                            <span class="material-symbols-outlined text-[20px]">person_filled</span>
                        </div>
                        <div class="flex h-8 w-8 items-center justify-center rounded border border-dashed border-gray-600 text-gray-500">
                            <span class="material-symbols-outlined text-[20px]">person_add</span>
                        </div>
                    </div>
                    <div class="mt-auto flex flex-wrap gap-2">
                        <span class="rounded bg-white/5 px-2 py-1 text-[10px] font-medium text-gray-300 uppercase">Competitive</span>
                    </div>
                </div>
                <div class="p-4 pt-0">
                    <button class="w-full py-2 bg-primary/10 hover:bg-primary text-primary hover:text-black font-bold text-xs uppercase rounded transition-all">Join Lobby</button>
                </div>
            </article>
        </div>

        <div class="mt-4 flex justify-center">
            <button class="flex items-center gap-2 rounded border border-white/10 bg-card-dark px-6 py-3 text-sm font-bold text-white transition-colors hover:bg-white/5 hover:text-primary">
                <span class="material-symbols-outlined">refresh</span>
                Load More Lobbies
            </button>
        </div>
    </section>
</main>

<!-- Floating Create Button (Mobile) -->
<div class="fixed bottom-6 right-6 z-50 md:hidden">
    <a asp-controller="Lobby" asp-action="Create" class="flex size-14 items-center justify-center rounded-full bg-primary text-black shadow-lg shadow-primary/30 active:scale-95">
        <span class="material-symbols-outlined text-[32px]">add</span>
    </a>
</div>

@section Scripts {
    <script>
        // Placeholder for future AJAX loading logic
        console.log("Activity feed initialized");
    </script>
}
