@{
    ViewData["Title"] = "Friends";
}

<div class="friends-page">
    <div class="page-header">
        <h1><i data-lucide="users"></i> Friends</h1>
        <p>Manage your gaming squad</p>
    </div>

    <!-- Search & Filters -->
    <div class="friends-controls card">
        <div class="search-box">
            <i data-lucide="search"></i>
            <input type="text" class="form-input" placeholder="Search friends..." id="friendSearch" />
        </div>
        <div class="filter-tabs">
            <button class="filter-tab active" data-filter="all">All (8)</button>
            <button class="filter-tab" data-filter="online">Online (3)</button>
            <button class="filter-tab" data-filter="pending">Pending (2)</button>
        </div>
    </div>

    <!-- Friends List -->
    <div class="friends-list">
        <!-- Online Friends -->
        <div class="friend-card card" data-status="online">
            <div class="friend-status online"></div>
            <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=ProGamer" alt="Avatar" class="friend-avatar" />
            <div class="friend-info">
                <div class="friend-name">ProGamer_X</div>
                <div class="friend-game">Playing Valorant</div>
            </div>
            <div class="friend-karma">
                <i data-lucide="star"></i> 5.0
            </div>
            <div class="friend-actions">
                <button class="btn btn-primary btn-sm">
                    <i data-lucide="message-circle"></i>
                </button>
                <button class="btn btn-secondary btn-sm">
                    <i data-lucide="user"></i>
                </button>
            </div>
        </div>

        <div class="friend-card card" data-status="online">
            <div class="friend-status online"></div>
            <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=TankMaster" alt="Avatar" class="friend-avatar" />
            <div class="friend-info">
                <div class="friend-name">TankMaster</div>
                <div class="friend-game">In Lobby</div>
            </div>
            <div class="friend-karma">
                <i data-lucide="star"></i> 4.9
            </div>
            <div class="friend-actions">
                <button class="btn btn-primary btn-sm">
                    <i data-lucide="message-circle"></i>
                </button>
                <button class="btn btn-secondary btn-sm">
                    <i data-lucide="user"></i>
                </button>
            </div>
        </div>

        <div class="friend-card card" data-status="online">
            <div class="friend-status online"></div>
            <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=WarriorX" alt="Avatar" class="friend-avatar" />
            <div class="friend-info">
                <div class="friend-name">WarriorX</div>
                <div class="friend-game">Online</div>
            </div>
            <div class="friend-karma">
                <i data-lucide="star"></i> 4.5
            </div>
            <div class="friend-actions">
                <button class="btn btn-primary btn-sm">
                    <i data-lucide="message-circle"></i>
                </button>
                <button class="btn btn-secondary btn-sm">
                    <i data-lucide="user"></i>
                </button>
            </div>
        </div>

        <!-- Offline Friends -->
        <div class="friend-card card" data-status="offline">
            <div class="friend-status offline"></div>
            <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=GamerGirl" alt="Avatar" class="friend-avatar" />
            <div class="friend-info">
                <div class="friend-name">GamerGirl_99</div>
                <div class="friend-game">Offline - Last seen 2h ago</div>
            </div>
            <div class="friend-karma">
                <i data-lucide="star"></i> 4.7
            </div>
            <div class="friend-actions">
                <button class="btn btn-secondary btn-sm">
                    <i data-lucide="user"></i>
                </button>
            </div>
        </div>

        <div class="friend-card card" data-status="offline">
            <div class="friend-status offline"></div>
            <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Shadow" alt="Avatar" class="friend-avatar" />
            <div class="friend-info">
                <div class="friend-name">ShadowNinja</div>
                <div class="friend-game">Offline - Last seen 1d ago</div>
            </div>
            <div class="friend-karma">
                <i data-lucide="star"></i> 4.2
            </div>
            <div class="friend-actions">
                <button class="btn btn-secondary btn-sm">
                    <i data-lucide="user"></i>
                </button>
            </div>
        </div>

        <!-- Pending Requests -->
        <div class="friend-card card pending" data-status="pending">
            <div class="friend-status pending"></div>
            <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=NewPlayer" alt="Avatar" class="friend-avatar" />
            <div class="friend-info">
                <div class="friend-name">NewPlayer123</div>
                <div class="friend-game">Sent you a friend request</div>
            </div>
            <div class="friend-karma">
                <i data-lucide="star"></i> 4.0
            </div>
            <div class="friend-actions">
                <button class="btn btn-success btn-sm">
                    <i data-lucide="check"></i>
                </button>
                <button class="btn btn-danger btn-sm">
                    <i data-lucide="x"></i>
                </button>
            </div>
        </div>
    </div>
</div>

<style>
.friends-page {
    max-width: 800px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: var(--spacing-lg);
}

.page-header h1 {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    font-size: 1.75rem;
}

.page-header h1 i {
    color: var(--color-primary-orange);
}

.page-header p {
    color: var(--color-smoke-gray);
    margin-top: var(--spacing-xs);
}

/* Controls */
.friends-controls {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
}

@@media (min-width: 600px) {
    .friends-controls {
        flex-direction: row;
        align-items: center;
        justify-content: space-between;
    }
}

.search-box {
    position: relative;
    flex: 1;
    max-width: 300px;
}

.search-box i {
    position: absolute;
    left: var(--spacing-sm);
    top: 50%;
    transform: translateY(-50%);
    color: var(--color-smoke-gray);
    width: 18px;
    height: 18px;
}

.search-box .form-input {
    padding-left: 40px;
}

.filter-tabs {
    display: flex;
    gap: var(--spacing-xs);
}

.filter-tab {
    padding: var(--spacing-xs) var(--spacing-md);
    background: var(--color-midnight);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-full);
    color: var(--color-smoke-gray);
    font-size: 0.875rem;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.filter-tab:hover {
    color: var(--color-ghost-white);
    border-color: var(--color-primary-orange);
}

.filter-tab.active {
    background: var(--color-primary-orange);
    color: white;
    border-color: var(--color-primary-orange);
}

/* Friends List */
.friends-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.friend-card {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    padding: var(--spacing-md);
}

.friend-status {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    flex-shrink: 0;
}

.friend-status.online {
    background: var(--color-toxic-green);
    box-shadow: 0 0 8px var(--color-toxic-green);
}

.friend-status.offline {
    background: var(--color-smoke-gray);
}

.friend-status.pending {
    background: var(--color-golden);
    box-shadow: 0 0 8px var(--color-golden);
}

.friend-avatar {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    border: 2px solid var(--color-primary-orange);
}

.friend-info {
    flex: 1;
    min-width: 0;
}

.friend-name {
    font-weight: 600;
    font-size: 1rem;
}

.friend-game {
    font-size: 0.75rem;
    color: var(--color-smoke-gray);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.friend-karma {
    display: flex;
    align-items: center;
    gap: 4px;
    color: var(--color-primary-orange);
    font-weight: 600;
    font-size: 0.875rem;
}

.friend-karma i {
    width: 14px;
    height: 14px;
}

.friend-actions {
    display: flex;
    gap: var(--spacing-xs);
}

.btn-sm {
    padding: var(--spacing-xs);
    min-width: 36px;
    height: 36px;
}

.btn-sm i {
    width: 16px;
    height: 16px;
}
</style>

@section Scripts {
    <script>
        lucide.createIcons();
        
        // Filter functionality
        document.querySelectorAll('.filter-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                const filter = this.dataset.filter;
                
                document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                
                document.querySelectorAll('.friend-card').forEach(card => {
                    if (filter === 'all' || card.dataset.status === filter) {
                        card.style.display = 'flex';
                    } else {
                        card.style.display = 'none';
                    }
                });
            });
        });
        
        // Search functionality
        document.getElementById('friendSearch').addEventListener('input', function() {
            const query = this.value.toLowerCase();
            document.querySelectorAll('.friend-card').forEach(card => {
                const name = card.querySelector('.friend-name').textContent.toLowerCase();
                card.style.display = name.includes(query) ? 'flex' : 'none';
            });
        });
    </script>
}
