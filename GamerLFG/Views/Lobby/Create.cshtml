@{
    ViewData["Title"] = "Create Lobby";
}

<div class="create-lobby-page">
    <div class="page-header">
        <h1><i data-lucide="plus-circle"></i> Create New Lobby</h1>
        <p>Set up a lobby and find your perfect squad</p>
    </div>

    <form asp-action="Create" method="post" class="create-form card" id="createLobbyForm">
        @Html.AntiForgeryToken()
        
        <!-- Basic Info -->
        <section class="form-section">
            <h2>Basic Information</h2>
            
            <div class="form-group">
                <label class="form-label" for="title">Lobby Title *</label>
                <input type="text" id="title" name="title" class="form-input" placeholder="e.g., Ranked Grind to Diamond" required />
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label" for="game">Game *</label>
                    <select id="game" name="game" class="form-input" required>
                        <option value="">Select a game</option>
                        <option value="Valorant">Valorant</option>
                        <option value="Elden Ring">Elden Ring</option>
                        <option value="Apex Legends">Apex Legends</option>
                        <option value="Minecraft">Minecraft</option>
                        <option value="Counter-Strike 2">Counter-Strike 2</option>
                        <option value="League of Legends">League of Legends</option>
                        <option value="Overwatch 2">Overwatch 2</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="maxPlayers">Max Players *</label>
                    <input type="number" id="maxPlayers" name="maxPlayers" class="form-input" min="2" max="20" value="5" required />
                </div>
            </div>
            
            <div class="form-group">
                <label class="form-label" for="description">Description</label>
                <textarea id="description" name="description" class="form-input form-textarea" rows="3" placeholder="Describe what you're looking for, requirements, etc."></textarea>
            </div>
        </section>

        <!-- Schedule -->
        <section class="form-section">
            <h2>Schedule</h2>
            
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label" for="scheduledDate">Date</label>
                    <input type="date" id="scheduledDate" name="scheduledDate" class="form-input" />
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="scheduledTime">Time</label>
                    <input type="time" id="scheduledTime" name="scheduledTime" class="form-input" />
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="duration">Duration</label>
                    <select id="duration" name="duration" class="form-input">
                        <option value="">No limit</option>
                        <option value="1hr">1 hour</option>
                        <option value="2hrs">2 hours</option>
                        <option value="3hrs">3 hours</option>
                        <option value="until-loss">Until loss</option>
                    </select>
                </div>
            </div>
        </section>

        <!-- Moods -->
        <section class="form-section">
            <h2>Vibe / Mood Tags</h2>
            <p class="section-hint">Select tags that describe your lobby's atmosphere</p>
            
            <div class="mood-tags">
                <label class="mood-tag-option">
                    <input type="checkbox" name="moods" value="Tryhard" />
                    <span class="tag">üî• Tryhard</span>
                </label>
                <label class="mood-tag-option">
                    <input type="checkbox" name="moods" value="Chill" />
                    <span class="tag tag-green">üòé Chill</span>
                </label>
                <label class="mood-tag-option">
                    <input type="checkbox" name="moods" value="Competitive" />
                    <span class="tag">üèÜ Competitive</span>
                </label>
                <label class="mood-tag-option">
                    <input type="checkbox" name="moods" value="Casual" />
                    <span class="tag tag-blue">üéÆ Casual</span>
                </label>
                <label class="mood-tag-option">
                    <input type="checkbox" name="moods" value="Mic On" />
                    <span class="tag tag-blue">üé§ Mic On</span>
                </label>
                <label class="mood-tag-option">
                    <input type="checkbox" name="moods" value="No Mic" />
                    <span class="tag">üîá No Mic</span>
                </label>
                <label class="mood-tag-option">
                    <input type="checkbox" name="moods" value="Learning" />
                    <span class="tag tag-gold">üìö Learning</span>
                </label>
                <label class="mood-tag-option">
                    <input type="checkbox" name="moods" value="Teaching" />
                    <span class="tag tag-gold">üë®‚Äçüè´ Teaching</span>
                </label>
            </div>
        </section>

        <!-- Roles -->
        <section class="form-section">
            <h2>Roles Needed</h2>
            <p class="section-hint">Define specific roles you're looking for (optional)</p>
            
            <div id="rolesContainer">
                <div class="role-row">
                    <input type="text" name="roleNames[]" class="form-input" placeholder="Role name (e.g., Tank, Healer, DPS)" />
                    <input type="number" name="roleCounts[]" class="form-input role-count" min="1" max="10" value="1" placeholder="Count" />
                    <button type="button" class="btn btn-secondary remove-role" onclick="removeRole(this)">
                        <i data-lucide="x"></i>
                    </button>
                </div>
            </div>
            
            <button type="button" class="btn btn-secondary add-role-btn" onclick="addRole()">
                <i data-lucide="plus"></i>
                Add Another Role
            </button>
        </section>

        <!-- Submit -->
        <div class="form-actions">
            <a asp-action="Index" class="btn btn-secondary">Cancel</a>
            <button type="submit" class="btn btn-primary btn-lg">
                <i data-lucide="rocket"></i>
                Create Lobby
            </button>
        </div>
    </form>
</div>

<style>
.create-lobby-page {
    max-width: 720px;
    margin: 0 auto;
}

.page-header {
    margin-bottom: var(--spacing-xl);
}

.page-header h1 {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    font-size: 1.75rem;
}

.page-header h1 i {
    color: var(--color-primary-orange);
}

.page-header p {
    color: var(--color-smoke-gray);
    margin-top: var(--spacing-xs);
}

.create-form {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xl);
}

.form-section {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
}

.form-section h2 {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--color-primary-orange);
    padding-bottom: var(--spacing-sm);
    border-bottom: 1px solid var(--glass-border);
}

.section-hint {
    color: var(--color-smoke-gray);
    font-size: 0.875rem;
    margin-top: calc(-1 * var(--spacing-sm));
}

.form-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: var(--spacing-md);
}

.form-textarea {
    resize: vertical;
    min-height: 80px;
}

/* Mood Tags */
.mood-tags {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-sm);
}

.mood-tag-option {
    cursor: pointer;
}

.mood-tag-option input {
    display: none;
}

.mood-tag-option .tag {
    transition: all var(--transition-fast);
    border: 2px solid transparent;
}

.mood-tag-option input:checked + .tag {
    border-color: var(--color-primary-orange);
    box-shadow: var(--shadow-glow-orange);
}

/* Roles */
.role-row {
    display: flex;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-sm);
}

.role-row .form-input {
    flex: 1;
}

.role-count {
    max-width: 80px;
}

.remove-role {
    padding: var(--spacing-sm);
}

.remove-role i {
    width: 18px;
    height: 18px;
}

.add-role-btn {
    align-self: flex-start;
}

/* Form Actions */
.form-actions {
    display: flex;
    justify-content: flex-end;
    gap: var(--spacing-md);
    padding-top: var(--spacing-lg);
    border-top: 1px solid var(--glass-border);
}
</style>

@section Scripts {
    <script>
        lucide.createIcons();
        
        function addRole() {
            const container = document.getElementById('rolesContainer');
            const roleRow = document.createElement('div');
            roleRow.className = 'role-row';
            roleRow.innerHTML = `
                <input type="text" name="roleNames[]" class="form-input" placeholder="Role name" />
                <input type="number" name="roleCounts[]" class="form-input role-count" min="1" max="10" value="1" />
                <button type="button" class="btn btn-secondary remove-role" onclick="removeRole(this)">
                    <i data-lucide="x"></i>
                </button>
            `;
            container.appendChild(roleRow);
            lucide.createIcons();
        }
        
        function removeRole(btn) {
            const container = document.getElementById('rolesContainer');
            if (container.children.length > 1) {
                btn.closest('.role-row').remove();
            }
        }
    </script>
}
